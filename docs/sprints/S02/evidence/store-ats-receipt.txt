$ npx tsx --test engine/store.test.ts
TAP version 13
# Subtest: AT-S02-01: Run Store correctly tracks and retrieves append-only events
ok 1 - AT-S02-01: Run Store correctly tracks and retrieves append-only events
  ---
  duration_ms: 1.222833
  type: 'test'
  ...
# Subtest: AT-S02-02: Idempotency is preserved (identical inputs yield no new duplicated actions)
ok 2 - AT-S02-02: Idempotency is preserved (identical inputs yield no new duplicated actions)
  ---
  duration_ms: 0.484583
  type: 'test'
  ...
# Subtest: AT-S02-03: Crash-safe resume restores state precisely and completes workflow successfully
ok 3 - AT-S02-03: Crash-safe resume restores state precisely and completes workflow successfully
  ---
  duration_ms: 0.667542
  type: 'test'
  ...
1..3
# tests 3
# suites 0
# pass 3
# fail 0
# cancelled 0
# skipped 0
# todo 0
# duration_ms 133.022458
EXIT_CODE=0
